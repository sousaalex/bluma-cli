# BluMa Project Summary (Auto-generated)

## Project Overview

**BluMa CLI** is a modern, automation-focused engineering agent for the terminal. It leverages React-based (Ink) interactive UIs and orchestrates code automation, workflow management, developer prompts, and tool integration in a conversational agent model. Smart agent collaboration (OpenAI-compatible LLMs, Azure) and extensibility via native and plugin-based tools are key features. Persistent session/context, confirmation workflows, and extensibility make it suitable for complex developer environments.

## Technology Stack

- **Language:** TypeScript (ES Modules)
- **Runtime:** Node.js >= 18
- **CLI UI:** React 18 via Ink 5, with Ink ecosystem (ink-input, ink-spinner, ink-big-text)
- **Build:** esbuild, babel (env, react, typescript presets)
- **Testing:** Jest 30 + babel-jest, TypeScript support
- **Agent/LLM:** Azure OpenAI + `openai` SDK, MCP via `@modelcontextprotocol/sdk`
- **Config:** dotenv, advanced configs in `src/app/agent/config/`
- **Other Deps:** uuid, diff, react-devtools-core, update-notifier

## Directory Structure (Summary)

```
bluma-engineer/
├── package.json             # NPM manifest, scripts & project meta
├── tsconfig.json            # TypeScript compiler settings
├── babel.config.cjs         # Babel transpiler config (node 18+, TS)
├── jest.config.cjs          # Test runner setup (Jest + Babel)
├── scripts/
│   └── build.js             # esbuild CLI build script
├── src/
│   ├── main.ts              # CLI entry point, Ink renderer
│   └── app/
│        ├── agent/          # Agent logic, session, tools, LLM, MCP SDK
│        │      ├── config/  # Config for MCP, native tools, credentials
│        │      ├── core/    # LLM, prompt construction, orchestration
│        │      ├── feedback/# Agent feedback, system suggestions
│        │      ├── subagents/# Modular agent extensions
│        │      ├── tools/   # Tool registry, native/tooling/MCP
│        │      └── utils/   # Utility helpers, updates, history
│        ├── protocols/      # Protocol wrappers, sys messages
│        └── ui/             # Ink/React CLI components, layout, prompts
│              ├── components/
│              ├── utils/
├── tests/                   # Jest/TS test suites (*.spec.ts)
├── docs/                    # Documentation, banners, images
│   └── assets/
├── CONTRIBUTING.md
├── LICENSE
└── README.md
```

## Key Configs & Scripts

- **package.json:**
  - Scripts: `build` (node scripts/build.js), `start` (node dist/main.js), `test`, `test:watch`, `prepack` (build before publish)
  - Main: `dist/main.js`, Bin: `bluma` CLI entry
- **tsconfig.json:** Targeting Node 18+, ESM, JSX (react-jsx), strict typing
- **babel.config.cjs:** Preset config for env, TypeScript; targets node 18
- **jest.config.cjs:** Jest with babel-jest for .ts/.tsx, roots in project, `tests/` matching
- **scripts/build.js:** esbuild (TypeScript to JS, bundle step)
- **src/app/agent/config/:** Advanced agent, MCP, and native tools config

## Primary Entry Points

- `src/main.ts`: CLI program entry (runs Ink React app)
- `src/app/agent/agent.ts`: Agent core logic
- Scripts in package.json: see above

## Useful CLI Commands

- `npm run build` — Compile TS to JS, bundle via esbuild (output: dist/)
- `npm start` — Run the CLI (after build)
- `npx bluma` — Run built CLI interactively
- `npm test` or `npm run test:watch` — Run Jest tests (with TS support)

## Operational & Dev Notes

- **.env** required; see README for variables (OpenAI/Azure keys, etc).
- Main config, plugin, and tool definition files: `src/app/agent/config/`
- Test coverage in `/tests`; do not edit production logic when test constraints active
- Supports live dev overlay channel for mid-task hints/constraints
- All persistent state/logs stored relative to CLI working directory

## Next Tasks / BluMa Agent Notes

- Consult `src/app/agent/config/` for adding or customizing tools, credentials
- Follow CONTRIBUTING.md for patch/process standards
- Use session overlays to pass dev guidance in real time

---
_Auto-generated by BluMa InitSubAgent. Always validate details against current repo state before assuming architectural invariants._

